# nRF52 Platform Configuration
# Included by all nRF52-based boards (RAK4631, Wio Tracker, T1000-E, Ikoka Nano, etc.)
# Only contains nRF52-specific settings — common BLE/Storage/Input is in zephcore_common.conf
#
# Include order: prj.conf → zephcore_common.conf → nrf52_common.conf → <board>/board.conf

# ========== Build Output (nRF52 specific) ==========
CONFIG_BUILD_OUTPUT_UF2=y
CONFIG_USE_DT_CODE_PARTITION=y

# ========== USB CDC ACM (nRF52 USB) ==========
CONFIG_USB_DEVICE_STACK_NEXT=y
CONFIG_CDC_ACM_SERIAL_INITIALIZE_AT_BOOT=y
CONFIG_CDC_ACM_SERIAL_PRODUCT_STRING="ZephCore"
CONFIG_UART_LINE_CTRL=y

# ========== BLE: nRF52-specific controller settings ==========
# TX power: +4 dBm (Zephyr open-source BLE controller)
CONFIG_BT_CTLR_TX_PWR_PLUS_4=y

# Data Length Extension — controller-side max (host-side in zephcore_common.conf)
CONFIG_BT_CTLR_DATA_LENGTH_MAX=251

# ========== Flash: nRF52-specific ==========
# QSPI flash — disabled by default (safer — avoids hang if chip missing).
# Boards with QSPI (Wio Tracker L1) override in board.conf.
CONFIG_NORDIC_QSPI_NOR=n

# Recover from corrupted NVS sectors (nRF52 flash can develop bad regions)
CONFIG_NVS_INIT_BAD_MEMORY_REGION=y

# ========== SEGGER RTT (J-Link debug) ==========
# RTT log backend is in boards/common/logging.conf (only included for debug builds).
CONFIG_USE_SEGGER_RTT=y
CONFIG_SEGGER_RTT_BUFFER_SIZE_UP=4096

# ========== Debug ==========
CONFIG_ASSERT=y
CONFIG_BT_CTLR_ASSERT_HANDLER=y
