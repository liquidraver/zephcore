# WiFi OTA Configuration
# Auto-included by CMakeLists.txt for ESP32 repeater builds.
# Enables WiFi AP + HTTP server + MCUboot image management.

CONFIG_ZEPHCORE_WIFI_OTA=y

# ========== Networking Stack ==========
CONFIG_NETWORKING=y
CONFIG_NET_IPV4=y
CONFIG_NET_IPV6=n
CONFIG_NET_TCP=y
CONFIG_NET_UDP=y
CONFIG_NET_SOCKETS=y
CONFIG_NET_MAX_CONTEXTS=4
CONFIG_NET_PKT_RX_COUNT=16
CONFIG_NET_PKT_TX_COUNT=16
CONFIG_NET_BUF_RX_COUNT=32
CONFIG_NET_BUF_TX_COUNT=32
CONFIG_NET_IF_MAX_IPV4_COUNT=1
CONFIG_NET_MGMT=y
CONFIG_NET_MGMT_EVENT=y
CONFIG_ZVFS_POLL_MAX=8
CONFIG_EVENTFD=y
CONFIG_ZVFS_EVENTFD_MAX=4
CONFIG_ZVFS_OPEN_MAX=16

# ========== WiFi AP ==========
CONFIG_WIFI=y
CONFIG_NET_L2_WIFI_MGMT=y
CONFIG_NET_L2_ETHERNET=y

# ========== DHCP Server ==========
CONFIG_NET_DHCPV4_SERVER=y
CONFIG_NET_DHCPV4_SERVER_ADDR_COUNT=4
CONFIG_NET_DHCPV4_SERVER_INSTANCES=1

# ========== HTTP Server ==========
CONFIG_HTTP_SERVER=y
CONFIG_HTTP_SERVER_NUM_SERVICES=1
CONFIG_HTTP_SERVER_MAX_CLIENTS=1
CONFIG_HTTP_SERVER_MAX_URL_LENGTH=64
CONFIG_HTTP_SERVER_CLIENT_BUFFER_SIZE=1024
CONFIG_HTTP_SERVER_STACK_SIZE=4096

# ========== MCUboot Image Management (ESP32 only) ==========
CONFIG_BOOTLOADER_MCUBOOT=y
CONFIG_IMG_MANAGER=y
CONFIG_STREAM_FLASH=y
CONFIG_IMG_BLOCK_BUF_SIZE=4096
CONFIG_IMG_ERASE_PROGRESSIVELY=y

# ========== Debug logging (temporary) ==========
CONFIG_NET_LOG=y

# ========== Heap (WiFi + TCP/IP + HTTP needs more than default) ==========
CONFIG_HEAP_MEM_POOL_SIZE=65536

